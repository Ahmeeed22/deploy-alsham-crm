"use strict";(self.webpackChunkuser=self.webpackChunkuser||[]).push([[699],{2699:(Q,m,l)=>{l.r(m),l.d(m,{SuppliersModule:()=>L});var p=l(6895),g=l(9299),r=l(4006),e=l(4650),h=l(6e3),Z=l(5076),f=l(5938),S=l(7185),A=l(3238),x=l(4859),C=l(7392),u=l(9549),b=l(4144),T=l(4385);function _(n,i){if(1&n&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function O(n,i){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"required"),e.qZA())}function M(n,i){if(1&n&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function q(n,i){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"required"),e.qZA())}function U(n,i){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"must greater than 10"),e.qZA())}function y(n,i){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"required"),e.qZA())}let v=(()=>{class n{constructor(t,o,a,s){this._SppliersService=t,this._TransactionsService=o,this.dialog=a,this.toaster=s,this.suppliers=[],this.banks=[],this.formAdd=new r.cw({amount:new r.NI(0,[r.kI.required,r.kI.min(10)]),supplierId:new r.NI(null,[r.kI.required]),bankId:new r.NI(null),desc:new r.NI(null,[r.kI.required]),type:new r.NI("credit",[r.kI.required])}),this.getAllSuppliers(),this.getAllBanksAccounts()}ngOnInit(){}getAllSuppliers(){this._SppliersService.getAllSuppliers().subscribe({next:t=>{this.suppliers=t.result.rows},error:t=>{console.log(t)}})}getAllBanksAccounts(){this._TransactionsService.getAllBankAccount().subscribe({next:t=>{console.log(t),this.banks=t.result.rows,this.toaster.success("get all banks accounts","success")},error:t=>{this.toaster.error("error getting banks","error")}})}save(){this.formAdd?.markAllAsTouched(),this.formAdd?.valid?this._SppliersService.addsupplierStatementAccount(this.formAdd?.value).subscribe({next:t=>{this.toaster.success("success add statement","success"),this.dialog.close(!0)},error:t=>{console.log(t),this.toaster.error("error saving data","error")}}):this.toaster.error("please enter valid data","data"),console.log(this.formAdd.value)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.h),e.Y36(Z.v),e.Y36(f.so),e.Y36(S._W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-supplier-transaction"]],decls:34,vars:7,consts:[[1,"container"],[1,"d-flex","justify-content-between","align-items-center"],["mat-flat-button","",1,"text-danger",3,"click"],[1,"row"],[1,"col","col-md-12","pt-3"],[3,"formGroup","ngSubmit"],["appearance","outline",1,"w-100"],["formControlName","supplierId","placeholder","Supplier","required",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["formControlName","bankId","placeholder","Bank"],["appearance","outline",1,"w-100","position-relative"],["matInput","","type","number","formControlName","amount","placeholder","e.g. Creating an Online Shopping Experience","spellcheck","true","required",""],["matInput","","formControlName","desc","placeholder","e.g. Creating an Online Shopping Experience","spellcheck","true","required",""],["type","submit",1,"btn","btn-primary"],[3,"value"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"header",1)(2,"legend"),e._uU(3,"Add Statement"),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return o.dialog.close(!0)}),e.TgZ(5,"mat-icon"),e._uU(6,"close"),e.qZA()()(),e.TgZ(7,"div",3)(8,"div",4)(9,"form",5),e.NdJ("ngSubmit",function(){return o.save()}),e.TgZ(10,"mat-form-field",6)(11,"mat-label"),e._uU(12,"Select Supplier"),e.qZA(),e.TgZ(13,"mat-select",7),e.YNc(14,_,2,2,"mat-option",8),e.qZA(),e.YNc(15,O,2,0,"mat-error",9),e.qZA(),e.TgZ(16,"mat-form-field",6)(17,"mat-label"),e._uU(18,"Select Banks"),e.qZA(),e.TgZ(19,"mat-select",10),e.YNc(20,M,2,2,"mat-option",8),e.qZA()(),e.TgZ(21,"mat-form-field",11)(22,"mat-label"),e._uU(23,"Amount"),e.qZA(),e._UZ(24,"input",12),e.YNc(25,q,2,0,"mat-error",9),e.YNc(26,U,2,0,"mat-error",9),e.qZA(),e.TgZ(27,"mat-form-field",11)(28,"mat-label"),e._uU(29,"Description"),e.qZA(),e._UZ(30,"input",13),e.YNc(31,y,2,0,"mat-error",9),e.qZA(),e.TgZ(32,"button",14),e._uU(33,"Submit"),e.qZA()()()()()),2&t){let a,s,d,c;e.xp6(9),e.Q6J("formGroup",o.formAdd),e.xp6(5),e.Q6J("ngForOf",o.suppliers),e.xp6(1),e.Q6J("ngIf",(null==(a=o.formAdd.get("supplierId"))?null:a.touched)&&(null==(a=o.formAdd.get("supplierId"))?null:a.hasError("required"))),e.xp6(5),e.Q6J("ngForOf",o.banks),e.xp6(5),e.Q6J("ngIf",(null==(s=o.formAdd.get("amount"))?null:s.touched)&&(null==(s=o.formAdd.get("amount"))?null:s.hasError("required"))),e.xp6(1),e.Q6J("ngIf",(null==(d=o.formAdd.get("amount"))?null:d.touched)&&(null==(d=o.formAdd.get("amount"))?null:d.hasError("min"))),e.xp6(5),e.Q6J("ngIf",(null==(c=o.formAdd.get("desc"))?null:c.touched)&&(null==(c=o.formAdd.get("desc"))?null:c.hasError("required")))}},dependencies:[p.sg,p.O5,A.ey,x.lW,C.Hw,u.TO,u.KE,u.hX,b.Nt,T.gD,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.Q7,r.sg,r.u]}),n})();function P(n,i){if(1&n&&(e.TgZ(0,"mat-option",14),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function w(n,i){if(1&n&&(e.TgZ(0,"div",15)(1,"h2"),e._uU(2),e.TgZ(3,"span",16),e._uU(4),e.qZA()()()),2&n){const t=e.oxw();e.xp6(2),e.hij("",t.selectedSupplier.name+" Balance = "," "),e.xp6(2),e.Oqu(t.selectedSupplier.balance)}}function I(n,i){if(1&n&&(e.TgZ(0,"tr",17)(1,"td",18),e._uU(2),e.qZA(),e.TgZ(3,"td",18),e._uU(4),e.qZA(),e.TgZ(5,"td",18),e._uU(6),e.qZA(),e.TgZ(7,"td",18),e._uU(8),e.qZA(),e.TgZ(9,"td",18),e._uU(10),e.qZA(),e.TgZ(11,"td",18),e._uU(12),e.ALo(13,"date"),e.qZA()()),2&n){const t=i.$implicit,o=i.index;e.xp6(2),e.Oqu(1+o),e.xp6(2),e.Oqu(t.empName||"--"),e.xp6(2),e.Oqu(t.desc),e.xp6(2),e.Oqu("debit"==t.type?t.amount:"--"),e.xp6(2),e.Oqu("credit"==t.type?t.amount:"--"),e.xp6(2),e.hij(" ",e.xi3(13,6,t.createdAt,"yyyy-MM-dd HH:mm:ss"),"")}}const N=[{path:"",redirectTo:"List",pathMatch:"full"},{path:"List",component:(()=>{class n{constructor(t,o,a){this._SppliersService=t,this.dialog=o,this.toaster=a,this.dataSource=[],this.suppliers=[],this.suppierStatements=[],this.selectedSupplier={},this.getAllSuppliers()}ngOnInit(){}getAllSuppliers(){this._SppliersService.getAllSuppliers().subscribe({next:t=>{this.suppliers=t.result.rows,this.selectedSupplier=this.suppliers[0],this.getAllSuppliersStatement()},error:t=>{console.log(t)}})}getAllSuppliersStatement(){this._SppliersService.getAllSuppliersStatements().subscribe({next:t=>{this.dataSource=t.result.rows,this.onSuppierChange(null,this.selectedSupplier),this.toaster.success("Success Getting Suppliers Statements","Success")},error:t=>{this.toaster.error("faild  Getting Suppliers Statements","Error")}})}onSuppierChange(t,o={}){this.suppierStatements=this.dataSource.filter(a=>(this.selectedSupplier=t?.value?t?.value:o,a.supplierId===this.selectedSupplier.id))}addSupplierStatement(){this.dialog.open(v,{width:"60%",disableClose:!0}).afterClosed().subscribe(o=>{this.getAllSuppliers()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.h),e.Y36(f.uw),e.Y36(S._W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-list-transaction-supplier"]],decls:31,vars:3,consts:[[1,"container"],[1,"row"],[1,"top","mt-5","mb-3","d-flex","justify-content-between"],[1,"supplierSelection"],["appearance","outline"],[3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"addStatement","d-flex","align-items-center"],["mat-raised-button","",1,"addTask",3,"click"],["class","balance",4,"ngIf"],[1,"table"],[1,"table","table-hover"],[1,"text-center","text-white","text-light"],["class","text-center hover","style","text-align: center;",4,"ngFor","ngForOf"],[3,"value"],[1,"balance"],[2,"color","blue"],[1,"text-center","hover",2,"text-align","center"],[2,"text-align","center"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),e._uU(6,"Supplier"),e.qZA(),e.TgZ(7,"mat-select",5),e.NdJ("selectionChange",function(s){return o.onSuppierChange(s)}),e.YNc(8,P,2,2,"mat-option",6),e.qZA()()(),e.TgZ(9,"div",7)(10,"button",8),e.NdJ("click",function(){return o.addSupplierStatement()}),e._uU(11,"Add Supplier Statement"),e.qZA()()(),e.YNc(12,w,5,2,"div",9),e.TgZ(13,"div",10)(14,"table",11)(15,"thead")(16,"tr",12)(17,"th"),e._uU(18,"Index"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Employee Name"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Description"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"DR"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"CR"),e.qZA(),e.TgZ(27,"th"),e._uU(28,"Date"),e.qZA()()(),e.TgZ(29,"tbody"),e.YNc(30,I,14,9,"tr",13),e.qZA()()()()()),2&t&&(e.xp6(8),e.Q6J("ngForOf",o.suppliers),e.xp6(4),e.Q6J("ngIf",null==o.selectedSupplier?null:o.selectedSupplier.name),e.xp6(18),e.Q6J("ngForOf",o.suppierStatements))},dependencies:[p.sg,p.O5,A.ey,x.lW,u.KE,u.hX,T.gD,p.uU],styles:["button[_ngcontent-%COMP%]{color:#fff;margin:0 5px}button.addTask[_ngcontent-%COMP%]{background-color:#63e38a!important;color:#fff;padding:2px 23px;font-size:20px}[_nghost-%COMP%]     table thead{background-color:#7e807e!important}[_nghost-%COMP%]     table thead .mat-header-cell{color:#fff}button[_ngcontent-%COMP%]{transition:all .4s;border-radius:13px}button[_ngcontent-%COMP%]:hover{border-radius:30px}.hhover[_ngcontent-%COMP%]:hover{color:#fff!important}th[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.mat-elevation-z8[_ngcontent-%COMP%]{box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.mat-form-field-appearance-outline[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]{padding:0!important}[_nghost-%COMP%]     .mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:141px}[_nghost-%COMP%]     .mat-form-field-label-wrapper{position:absolute;left:12px;z-index:1000;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[_nghost-%COMP%]     input.mat-input-element{margin-top:-.0625em;height:38px}[_nghost-%COMP%]     .mat-form-field-infix{padding:0!important}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;inset:.25em 0 0;pointer-events:none;height:53px}@media only screen and (max-width: 768px){.ddl[_ngcontent-%COMP%]{margin:8.3px 0}.search[_ngcontent-%COMP%]{padding:18px 22px;margin:12px}}@media print{.atPrint[_ngcontent-%COMP%]{display:none!important}.listBox[_ngcontent-%COMP%]{height:100vh;width:90vw}.headinvoice[_ngcontent-%COMP%]{display:block}}.hover[_ngcontent-%COMP%]:hover{background-color:#fff5a2}.top[_ngcontent-%COMP%]{border:2px solid #ccc;padding:20px;border-radius:8px;box-shadow:0 2px 4px #0000001a;width:100%}.supplierSelection[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:10px;font-size:1.5rem}.mat-form-field[_ngcontent-%COMP%]{width:100%}.mat-label[_ngcontent-%COMP%]{font-size:1rem}.mat-select[_ngcontent-%COMP%]{width:100%;font-size:1rem}[_nghost-%COMP%]     .mat-form-field-infix{display:block;position:relative;flex:auto;top:15px;min-width:0;width:179px;height:51px}[_nghost-%COMP%]     .mat-form-field-label-wrapper{position:absolute;left:12px;top:-26px;z-index:1000;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}"]}),n})()},{path:"Add",component:v}];let J=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[g.Bz.forChild(N),g.Bz]}),n})();var k=l(1941),Y=l(2575),F=l(259);let L=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,J,k.q,Y.I,F.m,r.u5,r.UX]}),n})()}}]);