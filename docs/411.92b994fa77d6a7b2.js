"use strict";(self.webpackChunkuser=self.webpackChunkuser||[]).push([[411],{411:(F,m,a)=>{a.r(m),a.d(m,{BanksModule:()=>N});var d=a(6895),u=a(9299),s=a(4006),t=a(4650),p=a(9325),g=a(5938),h=a(7185),f=a(3238),b=a(4859),v=a(7392),c=a(9549),A=a(4144),x=a(4385);function T(n,i){if(1&n&&(t.TgZ(0,"mat-option",17),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function k(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"required"),t.qZA())}function C(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"must greater than 10"),t.qZA())}let Z=(()=>{class n{constructor(e,o,r){this._BanksService=e,this.dialog=o,this.toaster=r,this.formAdd=new s.cw({accountId:new s.NI("",[s.kI.required]),amount:new s.NI("",[s.kI.required]),DESC:new s.NI(""),type:new s.NI("",[s.kI.required])}),this.banks=[],this.getAllBanks()}ngOnInit(){}getAllBanks(){this._BanksService.getAllBanks().subscribe({next:e=>{this.banks=e.result.rows,this.toaster.success("get banks success","banks success")},error:e=>{this.toaster.error(e,"banks error")}})}save(){this.formAdd?.markAllAsTouched(),this.formAdd?.valid?this._BanksService.addBankStatementAccount(this.formAdd.value).subscribe({next:e=>{this.toaster.success("bank statement added success and update bank balance success","Success"),this.dialog.close()},error:e=>{this.toaster.error(e,"failed add")}}):this.toaster.warning("please enter valid data","Required Data")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.G),t.Y36(g.so),t.Y36(h._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-transaction"]],decls:35,vars:4,consts:[[1,"container"],[1,"d-flex","justify-content-between","align-items-center"],["mat-flat-button","",1,"text-danger",3,"click"],[1,"row"],[1,"col","col-md-12","pt-3"],[3,"formGroup","ngSubmit"],["appearance","outline",1,"w-100"],["formControlName","accountId","placeholder","Bank"],[3,"value",4,"ngFor","ngForOf"],["formControlName","type","placeholder","Bank"],["value","withdraw"],["value","deposit"],["appearance","outline",1,"w-100","position-relative"],["matInput","","type","number","formControlName","amount","placeholder","e.g. Creating an Online Shopping Experience","spellcheck","true","required",""],[4,"ngIf"],["matInput","","formControlName","DESC","placeholder","DESCRIPTION "],["type","submit",1,"btn","btn-primary"],[3,"value"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"header",1)(2,"legend"),t._uU(3,"Add Bank Statement"),t.qZA(),t.TgZ(4,"button",2),t.NdJ("click",function(){return o.dialog.close(!0)}),t.TgZ(5,"mat-icon"),t._uU(6,"close"),t.qZA()()(),t.TgZ(7,"div",3)(8,"div",4)(9,"form",5),t.NdJ("ngSubmit",function(){return o.save()}),t.TgZ(10,"mat-form-field",6)(11,"mat-label"),t._uU(12,"Select Banks"),t.qZA(),t.TgZ(13,"mat-select",7),t.YNc(14,T,2,2,"mat-option",8),t.qZA()(),t.TgZ(15,"mat-form-field",6)(16,"mat-label"),t._uU(17,"Select Type"),t.qZA(),t.TgZ(18,"mat-select",9)(19,"mat-option",10),t._uU(20," Withdrow "),t.qZA(),t.TgZ(21,"mat-option",11),t._uU(22," Deposit "),t.qZA()()(),t.TgZ(23,"mat-form-field",12)(24,"mat-label"),t._uU(25,"Amount"),t.qZA(),t._UZ(26,"input",13),t.YNc(27,k,2,0,"mat-error",14),t.YNc(28,C,2,0,"mat-error",14),t.qZA(),t.TgZ(29,"mat-form-field",12)(30,"mat-label"),t._uU(31,"Description"),t.qZA(),t._UZ(32,"input",15),t.qZA(),t.TgZ(33,"button",16),t._uU(34,"Submit"),t.qZA()()()()()),2&e){let r,l;t.xp6(9),t.Q6J("formGroup",o.formAdd),t.xp6(5),t.Q6J("ngForOf",o.banks),t.xp6(13),t.Q6J("ngIf",(null==(r=o.formAdd.get("amount"))?null:r.touched)&&(null==(r=o.formAdd.get("amount"))?null:r.hasError("required"))),t.xp6(1),t.Q6J("ngIf",(null==(l=o.formAdd.get("amount"))?null:l.touched)&&(null==(l=o.formAdd.get("amount"))?null:l.hasError("min")))}},dependencies:[d.sg,d.O5,f.ey,b.lW,v.Hw,c.TO,c.KE,c.hX,A.Nt,x.gD,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.Q7,s.sg,s.u]}),n})();var O=a(9298);function B(n,i){if(1&n&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.name," ")}}function _(n,i){if(1&n&&(t.TgZ(0,"div",15)(1,"h2"),t._uU(2),t.TgZ(3,"span",16),t._uU(4),t.qZA()()()),2&n){const e=t.oxw();t.xp6(2),t.hij("",e.selectedBank.name+" Balance = "," "),t.xp6(2),t.Oqu(e.selectedBank.balance)}}function S(n,i){if(1&n&&(t.TgZ(0,"tr",17)(1,"td",18),t._uU(2),t.qZA(),t.TgZ(3,"td",18),t._uU(4),t.qZA(),t.TgZ(5,"td",18),t._uU(6),t.qZA(),t.TgZ(7,"td",18),t._uU(8),t.qZA(),t.TgZ(9,"td",18),t._uU(10),t.qZA(),t.TgZ(11,"td",18),t._uU(12),t.ALo(13,"date"),t.qZA()()),2&n){const e=i.$implicit,o=i.index;t.xp6(2),t.Oqu(1+o),t.xp6(2),t.Oqu(e.empName||"--"),t.xp6(2),t.Oqu(e.DESC||"--"),t.xp6(2),t.Oqu("withdraw"==e.type?e.amount:"--"),t.xp6(2),t.Oqu("deposit"==e.type?e.amount:"--"),t.xp6(2),t.hij(" ",t.xi3(13,6,e.createdAt,"yyyy-MM-dd HH:mm:ss"),"")}}const y=[{path:"",redirectTo:"List",pathMatch:"full"},{path:"List",component:(()=>{class n{constructor(e,o,r,l){this._BanksService=e,this.dialog=o,this.toaster=r,this.authService=l,this.dataSource=[],this.banks=[],this.banksStatements=[],this.selectedBank={},this.role=0,this.authService.currentUser.subscribe(Y=>{var J=this.authService.currentUser.getValue();this.role=J.role}),this.getAllbanks()}ngOnInit(){}getAllbanks(){this._BanksService.getAllBanks().subscribe({next:e=>{this.banks=e.result.rows,console.log(this.banks),this.selectedBank=this.banks[0],this.getAllbanksStatement()},error:e=>{console.log(e)}})}getAllbanksStatement(){this._BanksService.getAllBanksStatements().subscribe({next:e=>{this.dataSource=e.result.rows,this.onBankChange(null,this.selectedBank),this.toaster.success("Success Getting Banks Statements","Success")},error:e=>{this.toaster.error("faild  Getting Banks Statements","Error")}})}onBankChange(e,o={}){this.banksStatements=this.dataSource.filter(r=>(this.selectedBank=e?.value?e?.value:o,r.accountId===this.selectedBank.id))}addbankstatement(){this.dialog.open(Z,{width:"60%",disableClose:!0}).afterClosed().subscribe(o=>{this.getAllbanksStatement(),this.getAllbanks()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.G),t.Y36(g.uw),t.Y36(h._W),t.Y36(O.e))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-list-transaction"]],decls:31,vars:4,consts:[[1,"container"],[1,"row"],[1,"top","mt-5","mb-3","d-flex","justify-content-between"],[1,"supplierSelection"],["appearance","outline"],[3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"addStatement","d-flex","align-items-center"],["mat-raised-button","",1,"addTask",3,"disabled","click"],["class","balance",4,"ngIf"],[1,"table"],[1,"table","table-hover"],[1,"text-center","text-white","text-light"],["class","text-center hover","style","text-align: center;",4,"ngFor","ngForOf"],[3,"value"],[1,"balance"],[2,"color","blue"],[1,"text-center","hover",2,"text-align","center"],[2,"text-align","center"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),t._uU(6,"Bank"),t.qZA(),t.TgZ(7,"mat-select",5),t.NdJ("selectionChange",function(l){return o.onBankChange(l)}),t.YNc(8,B,2,2,"mat-option",6),t.qZA()()(),t.TgZ(9,"div",7)(10,"button",8),t.NdJ("click",function(){return o.addbankstatement()}),t._uU(11,"Add Bank Statement"),t.qZA()()(),t.YNc(12,_,5,2,"div",9),t.TgZ(13,"div",10)(14,"table",11)(15,"thead")(16,"tr",12)(17,"th"),t._uU(18,"Index"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Employee Name"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Description"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"DR"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"CR"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"Date"),t.qZA()()(),t.TgZ(29,"tbody"),t.YNc(30,S,14,9,"tr",13),t.qZA()()()()()),2&e&&(t.xp6(8),t.Q6J("ngForOf",o.banks),t.xp6(2),t.Q6J("disabled",3!==o.role),t.xp6(2),t.Q6J("ngIf",null==o.selectedBank?null:o.selectedBank.name),t.xp6(18),t.Q6J("ngForOf",o.banksStatements))},dependencies:[d.sg,d.O5,f.ey,b.lW,c.KE,c.hX,x.gD,d.uU],styles:["button[_ngcontent-%COMP%]{color:#fff;margin:0 5px}button.addTask[_ngcontent-%COMP%]{background-color:#63e38a!important;color:#fff;padding:2px 23px;font-size:20px}[_nghost-%COMP%]     table thead{background-color:#7e807e!important}[_nghost-%COMP%]     table thead .mat-header-cell{color:#fff}button[_ngcontent-%COMP%]{transition:all .4s;border-radius:13px}button[_ngcontent-%COMP%]:hover{border-radius:30px}.hhover[_ngcontent-%COMP%]:hover{color:#fff!important}th[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.mat-elevation-z8[_ngcontent-%COMP%]{box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.mat-form-field-appearance-outline[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]{padding:0!important}[_nghost-%COMP%]     .mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:141px}[_nghost-%COMP%]     .mat-form-field-label-wrapper{position:absolute;left:12px;z-index:1000;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[_nghost-%COMP%]     input.mat-input-element{margin-top:-.0625em;height:38px}[_nghost-%COMP%]     .mat-form-field-infix{padding:0!important}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;inset:.25em 0 0;pointer-events:none;height:53px}@media only screen and (max-width: 768px){.ddl[_ngcontent-%COMP%]{margin:8.3px 0}.search[_ngcontent-%COMP%]{padding:18px 22px;margin:12px}}@media print{.atPrint[_ngcontent-%COMP%]{display:none!important}.listBox[_ngcontent-%COMP%]{height:100vh;width:90vw}.headinvoice[_ngcontent-%COMP%]{display:block}}.hover[_ngcontent-%COMP%]:hover{background-color:#fff5a2}.top[_ngcontent-%COMP%]{border:2px solid #ccc;padding:20px;border-radius:8px;box-shadow:0 2px 4px #0000001a;width:100%}.supplierSelection[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:10px;font-size:1.5rem}.mat-form-field[_ngcontent-%COMP%]{width:100%}.mat-label[_ngcontent-%COMP%]{font-size:1rem}.mat-select[_ngcontent-%COMP%]{width:100%;font-size:1rem}[_nghost-%COMP%]     .mat-form-field-infix{display:block;position:relative;flex:auto;top:15px;min-width:0;width:179px;height:51px}[_nghost-%COMP%]     .mat-form-field-label-wrapper{position:absolute;left:12px;top:-26px;z-index:1000;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}"]}),n})()},{path:"Add",component:a(5793).D}];let w=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.Bz.forChild(y),u.Bz]}),n})();var P=a(1941),q=a(2575),I=a(805);let N=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.ez,w,P.q,q.I,I.m8,s.u5,s.UX]}),n})()}}]);